(this["webpackJsonphouse-of-memes"]=this["webpackJsonphouse-of-memes"]||[]).push([[0],{208:function(e,t,n){},215:function(e,t){},217:function(e,t){},228:function(e,t){},230:function(e,t){},257:function(e,t){},259:function(e,t){},260:function(e,t){},265:function(e,t){},267:function(e,t){},273:function(e,t){},275:function(e,t){},294:function(e,t){},306:function(e,t){},309:function(e,t){},323:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(47),s=n.n(c),i=(n(208),n(6)),o=n.n(i),l=n(15),u=n(11),b=n(18),d=n(190),j=n(371),h=n(372),x=n(364),f=n(367),p=n(368),m=n(370),g=n(19),O=n(76),v=n(1),y=a.a.createContext(),w=function(){var e=a.a.useContext(y);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},k=function(e){var t=e.appId,n=e.children,r=a.a.useState(new O.a(t)),c=Object(u.a)(r,2),s=c[0],i=c[1];a.a.useEffect((function(){i(new O.a(t))}),[t]);var b=a.a.useState(s.currentUser),d=Object(u.a)(b,2),j=d[0],h=d[1];function x(){return(x=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.logIn(t);case 2:h(s.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=s.currentUser)||void 0===t?void 0:t.logOut();case 2:h(s.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=Object(g.a)(Object(g.a)({},s),{},{currentUser:j,logIn:function(e){return x.apply(this,arguments)},logOut:function(){return f.apply(this,arguments)}});return Object(v.jsx)(y.Provider,{value:p,children:n})};var C=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(b.g)(),s=w().currentUser.functions.createGame,i=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,n=t.gameId,c.push("/game/".concat(n,"/host"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"repeating-linear-gradient(to right, rgba(115, 169, 255, 0.4), rgba(115, 169, 255, 0.4) 100px, #fffef6 100px, #fffef6 200px)",height:"100vh"},children:[Object(v.jsx)(f.a,{variant:"h1",style:{fontFamily:"Fleur De Leah",color:"gold",textShadow:"2px 2px #000000"},children:"House of Memes"}),Object(v.jsx)(f.a,{variant:"h3",style:{fontFamily:"Fleur De Leah",color:"black",fontWeight:500,textShadow:"1px 1px 3px #000000"},children:Object(v.jsx)("i",{children:" Cleverness creates champions"})}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"60%",alignItems:"center",justifyContent:"space-between",marginTop:20},children:[Object(v.jsx)(p.a,{sx:{display:"flex",maxWidth:800},children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(f.a,{variant:"body",children:Object(v.jsx)("b",{children:'Ever see a painting and think, "That\'s exactly what our retrospectives look like: tiring, useless, and painful"? \ud83d\ude02'})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(f.a,{variant:"body",children:"Put that clever mind to use! This game is straightforward: a host selects a random piece of art, other players submit their funniest, tech-related caption, and then the host chooses the winner! Create a new game to be the host or Join an existing game by entering it's game ID. Happy memeing!"})]})}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Start from scratch!"}),Object(v.jsx)(j.a,{onClick:i,variant:"contained",style:{marginBottom:20},children:"Create New Game"}),"or",Object(v.jsx)(h.a,{}),Object(v.jsx)("b",{children:"Join Game"})," (enter existing game ID):",Object(v.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[Object(v.jsx)(x.a,{type:"text",onChange:function(e){a(e.target.value)},value:n,variant:"standard",style:{marginTop:20}}),Object(v.jsx)(j.a,{onClick:function(){c.push("/game/".concat(n))},variant:"contained",children:"Join"})]})]})]})},S=n(64);var _=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(u.a)(c,2),i=s[0],d=s[1],h=Object(r.useState)(""),g=Object(u.a)(h,2),O=g[0],y=g[1],k=Object(r.useState)({}),C=Object(u.a)(k,2),_=C[0],D=C[1],I=Object(b.h)().gameId,B=w(),F=B.currentUser.functions.submitCaption;Object(r.useEffect)((function(){function e(){return e=Object(l.a)(o.a.mark((function e(){var t,n,r,c,s,i,l,u,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Subscribing to change stream for game ".concat(I)),a(!0),t=B.currentUser.mongoClient("mongodb-atlas"),n=t.db("classic-cards").collection("games"),e.next=6,n.findOne({game_id:I});case 6:r=e.sent,D(r),c=n.watch({"fullDocument._id":I}),s=!1,i=!1,e.prev=11,u=Object(S.a)(c);case 13:return e.next=15,u.next();case 15:if(!(s=!(b=e.sent).done)){e.next=22;break}d=b.value,console.log("Game object updated",d),D(d.fullDocument);case 19:s=!1,e.next=13;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(11),i=!0,l=e.t0;case 28:if(e.prev=28,e.prev=29,!s||null==u.return){e.next=33;break}return e.next=33,u.return();case 33:if(e.prev=33,!i){e.next=36;break}throw l;case 36:return e.finish(33);case 37:return e.finish(28);case 38:case"end":return e.stop()}}),e,null,[[11,24,28,38],[29,,33,37]])}))),e.apply(this,arguments)}n||function(){e.apply(this,arguments)}()}),[B,I,n]);var U=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(I,O);case 3:return e.prev=3,d(!0),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"repeating-linear-gradient( to right, rgba(115, 169, 255, 0.4), rgba(115, 169, 255, 0.4) 100px, #fffef6 100px, #fffef6 200px)",height:"100vh"},children:[Object(v.jsx)(f.a,{variant:"h1",style:{fontFamily:"Fleur De Leah",color:"gold",textShadow:"2px 2px #000000"},children:"House of Memes"}),Object(v.jsx)(f.a,{variant:"h3",style:{fontFamily:"Fleur De Leah",color:"black",fontWeight:500},children:Object(v.jsx)("i",{children:" Cleverness creates champions"})}),Object(v.jsx)("br",{}),Boolean(_.allow_submissions)&&Boolean(_.image_url)&&Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:30},children:[Object(v.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500,marginBottom:50},src:_.image_url}),Object(v.jsx)(p.a,{sx:{width:420},children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(f.a,{variant:"body",color:"text.secondary",children:Object(v.jsx)("b",{children:"Caption this art piece:"})}),Object(v.jsx)(x.a,{fullWidth:!0,onChange:function(e){y(e.target.value)},value:O,disabled:i,label:"Enter a funny, tech-related caption...",variant:"outlined",style:{marginTop:20}})]})}),Object(v.jsx)(j.a,{variant:"contained",disabled:i,onClick:U,style:{marginTop:20,marginBottom:20},children:"Submit caption"})]}),Boolean(!_.allow_submissions)&&Boolean(!_.image_url)&&Object(v.jsx)("div",{children:Object(v.jsx)(f.a,{component:"p",children:"Host is selecting an image. Please stand by!"})}),Boolean(!_.allow_submissions)&&Boolean(_.image_url)&&Object(v.jsxs)("div",{children:[Object(v.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500},src:_.image_url}),Boolean(!_.winning_caption)&&Object(v.jsx)(f.a,{component:"p",children:"Host is selecting a winner. Please stand by!"}),Boolean(_.winning_caption)&&Object(v.jsx)(p.a,{sx:{width:420},children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(f.a,{variant:"h4",color:"text.secondary",gutterBottom:!0,children:_.winning_caption}),Object(v.jsx)(f.a,{sx:{mb:1.5},color:"text.secondary",children:Object(v.jsx)("i",{children:"Anonymous"})}),Object(v.jsx)(f.a,{variant:"body2",children:"Praha, Czechia"}),Object(v.jsx)(f.a,{variant:"body2",children:"WebExpo 2022"})]})})]})]})},D=n(373),I=n(375),B=n(379),F=n(378),U=n(374),E=n(376),A=n(377),H=n(369);var L=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(u.a)(c,2),i=s[0],d=s[1],h=Object(r.useState)(null),x=Object(u.a)(h,2),p=x[0],m=x[1],g=Object(r.useState)(!1),O=Object(u.a)(g,2),y=O[0],k=O[1],C=Object(r.useState)(!1),_=Object(u.a)(C,2),L=_[0],T=_[1],G=Object(r.useState)(-1),P=Object(u.a)(G,2),W=P[0],J=P[1],M=Object(b.h)().gameId,R=w(),z=R.currentUser.functions,Y=z.enableSubmissions,N=z.disableSubmissions,q=z.getRandomArtCard,K=z.setArtUrlForGame,Q=z.selectWinningCaption;Object(r.useEffect)((function(){function e(){return e=Object(l.a)(o.a.mark((function e(){var t,n,r,c,s,i,l,u,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Subscribing to change stream for game ".concat(M)),a(!0),t=R.currentUser.mongoClient("mongodb-atlas"),n=t.db("classic-cards").collection("games"),e.next=6,n.findOne({game_id:M});case 6:r=e.sent,d(r),p||m(r.image_url),c=n.watch({"fullDocument._id":M}),s=!1,i=!1,e.prev=12,u=Object(S.a)(c);case 14:return e.next=16,u.next();case 16:if(!(s=!(b=e.sent).done)){e.next=23;break}j=b.value,console.log("Game object updated",j),d(j.fullDocument);case 20:s=!1,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),i=!0,l=e.t0;case 29:if(e.prev=29,e.prev=30,!s||null==u.return){e.next=34;break}return e.next=34,u.return();case 34:if(e.prev=34,!i){e.next=37;break}throw l;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[12,25,29,39],[30,,34,38]])}))),e.apply(this,arguments)}n||function(){e.apply(this,arguments)}()}),[R]);var V=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.allow_submissions){e.next=6;break}return console.log("Enabling submissions for game ".concat(M)),e.next=4,Y(M);case 4:e.next=9;break;case 6:return console.log("Disabling submissions for game ".concat(M)),e.next=9,N(M);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,q();case 3:t=e.sent,n=t.primaryImage,m(n),k(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,K(M,p);case 3:T(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(M,i.submissions[W]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"repeating-linear-gradient( to right, rgba(115, 169, 255, 0.4), rgba(115, 169, 255, 0.4) 100px, #fffef6 100px, #fffef6 200px)",height:"100vh"},children:[Object(v.jsx)(f.a,{variant:"h1",style:{fontFamily:"Fleur De Leah",color:"gold",textShadow:"2px 2px #000000"},children:"House of Memes"}),Object(v.jsx)(f.a,{variant:"h3",style:{fontFamily:"Fleur De Leah",color:"black",fontWeight:500},children:Object(v.jsx)("i",{children:" Cleverness creates champions"})}),Object(v.jsx)("br",{}),Object(v.jsxs)(D.a,{value:"check",selected:i.allow_submissions,onChange:function(){V()},children:[i.allow_submissions?"Disable":"Enable"," Submissions"]}),Object(v.jsx)("br",{}),Boolean(!i.allow_submissions)&&Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:30},children:["Please select an art piece",Object(v.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500,boxShadow:"2px 2px 6px #000",marginBottom:50},src:p}),Object(v.jsx)(j.a,{onClick:X,disabled:y,variant:"outlined",children:"Get random art piece"}),Object(v.jsx)(j.a,{onClick:Z,disabled:L,variant:"contained",children:"Make current art piece active"})]}),Boolean(i.allow_submissions)&&Object(v.jsx)("div",{children:Object(v.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500},src:i.image_url})}),Object(v.jsxs)("div",{style:{marginTop:50},children:[Object(v.jsx)(H.a,{sx:{width:"100%",overflow:"hidden"},children:Object(v.jsx)(U.a,{sx:{maxHeight:300},children:Object(v.jsxs)(I.a,{stickyHeader:!0,sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(v.jsx)(E.a,{children:Object(v.jsx)(A.a,{children:Object(v.jsxs)(F.a,{children:["Submissions (",i.submissions.length,")"]})})}),Object(v.jsx)(B.a,{children:i.submissions.map((function(e,t){return Object(v.jsx)(A.a,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:function(){return J(t)},selected:t===W,children:Object(v.jsx)(F.a,{component:"th",scope:"row",children:e})},"row-".concat(t))}))})]})})}),Object(v.jsx)(j.a,{disabled:-1===W,onClick:$,children:"Select winner"})]}),Object(v.jsxs)("div",{children:["You are the Host! Game: ",M]})]}):Object(v.jsx)("div",{children:"Loading game..."})},T=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(u.a)(n,2),c=a[0],s=a[1],i=w();return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,i.logIn(O.b.anonymous());case 4:console.log("Logged in!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}i.currentUser||c||function(){e.apply(this,arguments)}()}),[i,c]),i.currentUser?t:Object(v.jsx)("div",{children:"Loading..."})};var G=function(){return Object(v.jsx)(k,{appId:"house_of_memes-zajem",children:Object(v.jsx)(T,{children:Object(v.jsx)(d.a,{basename:"/house-of-memes",children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{path:"/game/:gameId/host",children:Object(v.jsx)(L,{})}),Object(v.jsx)(b.b,{path:"/game/:gameId",children:Object(v.jsx)(_,{})}),Object(v.jsx)(b.b,{path:"/game",children:Object(v.jsx)(b.a,{to:"/"})}),Object(v.jsx)(b.b,{path:"/",children:Object(v.jsx)(C,{})})]})})})})};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(G,{})}),document.getElementById("root"))}},[[323,1,2]]]);
//# sourceMappingURL=main.d322ac4e.chunk.js.map