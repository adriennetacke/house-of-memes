(this["webpackJsonphouse-of-memes"]=this["webpackJsonphouse-of-memes"]||[]).push([[0],{206:function(e,t,n){},213:function(e,t){},215:function(e,t){},226:function(e,t){},228:function(e,t){},255:function(e,t){},257:function(e,t){},258:function(e,t){},263:function(e,t){},265:function(e,t){},271:function(e,t){},273:function(e,t){},292:function(e,t){},304:function(e,t){},307:function(e,t){},321:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(47),s=n.n(c),i=(n(206),n(6)),o=n.n(i),l=n(15),u=n(11),b=n(18),j=n(189),d=n(368),f=n(369),h=n(364),x=n(19),p=n(76),m=n(1),O=a.a.createContext(),g=function(){var e=a.a.useContext(O);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},v=function(e){var t=e.appId,n=e.children,r=a.a.useState(new p.a(t)),c=Object(u.a)(r,2),s=c[0],i=c[1];a.a.useEffect((function(){i(new p.a(t))}),[t]);var b=a.a.useState(s.currentUser),j=Object(u.a)(b,2),d=j[0],f=j[1];function h(){return(h=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.logIn(t);case 2:f(s.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=s.currentUser)||void 0===t?void 0:t.logOut();case 2:f(s.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=Object(x.a)(Object(x.a)({},s),{},{currentUser:d,logIn:function(e){return h.apply(this,arguments)},logOut:function(){return g.apply(this,arguments)}});return Object(m.jsx)(O.Provider,{value:v,children:n})};var y=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(b.g)(),s=g().currentUser.functions.createGame,i=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,n=t.gameId,c.push("/game/".concat(n,"/host"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:["House of Memes - Home Create Game",Object(m.jsx)(d.a,{onClick:i,children:"Create"}),Object(m.jsx)(f.a,{}),"Join Game",Object(m.jsx)(h.a,{type:"text",onChange:function(e){a(e.target.value)},value:n}),Object(m.jsx)(d.a,{onClick:function(){c.push("/game/".concat(n))},children:"Join"})]})},w=n(64),k=n(367),C=n(371),S=n(372);var _=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(u.a)(c,2),i=s[0],j=s[1],f=Object(r.useState)(""),x=Object(u.a)(f,2),p=x[0],O=x[1],v=Object(r.useState)({}),y=Object(u.a)(v,2),_=y[0],B=y[1],D=Object(b.h)().gameId,I=g(),U=I.currentUser.functions.submitCaption;Object(r.useEffect)((function(){function e(){return e=Object(l.a)(o.a.mark((function e(){var t,n,r,c,s,i,l,u,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Subscribing to change stream for game ".concat(D)),a(!0),t=I.currentUser.mongoClient("mongodb-atlas"),n=t.db("classic-cards").collection("games"),e.next=6,n.findOne({game_id:D});case 6:r=e.sent,B(r),c=n.watch({"fullDocument._id":D}),s=!1,i=!1,e.prev=11,u=Object(w.a)(c);case 13:return e.next=15,u.next();case 15:if(!(s=!(b=e.sent).done)){e.next=22;break}j=b.value,console.log("Game object updated",j),B(j.fullDocument);case 19:s=!1,e.next=13;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(11),i=!0,l=e.t0;case 28:if(e.prev=28,e.prev=29,!s||null==u.return){e.next=33;break}return e.next=33,u.return();case 33:if(e.prev=33,!i){e.next=36;break}throw l;case 36:return e.finish(33);case 37:return e.finish(28);case 38:case"end":return e.stop()}}),e,null,[[11,24,28,38],[29,,33,37]])}))),e.apply(this,arguments)}n||function(){e.apply(this,arguments)}()}),[I,D,n]);var F=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(D,p);case 3:return e.prev=3,j(!0),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"repeating-linear-gradient( to right, #fc9b90, #fc9b90 100px, #fffef6 100px, #fffef6 200px)"},children:[Object(m.jsx)(k.a,{variant:"h1",style:{fontFamily:"Fleur De Leah",color:"gold",textShadow:"2px 2px #000000"},children:"House of Memes"}),Object(m.jsx)(k.a,{variant:"h3",style:{fontFamily:"Fleur De Leah",color:"black",fontWeight:500},children:Object(m.jsx)("i",{children:" Cleverness creates champions"})}),Object(m.jsx)("br",{}),Boolean(_.allow_submissions)&&Boolean(_.image_url)&&Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:30},children:[Object(m.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500,marginBottom:50},src:_.image_url}),Object(m.jsx)(C.a,{sx:{width:420},children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(k.a,{variant:"body",color:"text.secondary",children:Object(m.jsx)("b",{children:"Caption this art piece:"})}),Object(m.jsx)(h.a,{fullWidth:!0,onChange:function(e){O(e.target.value)},value:p,disabled:i,label:"Enter a funny, tech-related caption...",variant:"outlined",style:{marginTop:20}})]})}),Object(m.jsx)(d.a,{variant:"contained",disabled:i,onClick:F,style:{marginTop:20,marginBottom:20},children:"Submit caption"})]}),Boolean(!_.allow_submissions)&&Boolean(!_.image_url)&&Object(m.jsx)("div",{children:Object(m.jsx)(k.a,{component:"p",children:"Host is selecting an image. Please stand by!"})}),Boolean(!_.allow_submissions)&&Boolean(_.image_url)&&Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500},src:_.image_url}),Boolean(!_.winning_caption)&&Object(m.jsx)(k.a,{component:"p",children:"Host is selecting a winner. Please stand by!"}),Boolean(_.winning_caption)&&Object(m.jsx)(C.a,{sx:{width:420},children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(k.a,{variant:"h4",color:"text.secondary",gutterBottom:!0,children:_.winning_caption}),Object(m.jsx)(k.a,{sx:{mb:1.5},color:"text.secondary",children:Object(m.jsx)("i",{children:"Anonymous"})}),Object(m.jsx)(k.a,{variant:"body2",children:"Paris, France"}),Object(m.jsx)(k.a,{variant:"body2",children:"ServerlessDays Paris 2021"})]})})]})]})},B=n(373),D=n(375),I=n(379),U=n(378),F=n(374),A=n(376),E=n(377),H=n(370);var G=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(u.a)(c,2),i=s[0],j=s[1],f=Object(r.useState)(null),h=Object(u.a)(f,2),x=h[0],p=h[1],O=Object(r.useState)(!1),v=Object(u.a)(O,2),y=v[0],C=v[1],S=Object(r.useState)(!1),_=Object(u.a)(S,2),G=_[0],L=_[1],P=Object(r.useState)(-1),M=Object(u.a)(P,2),T=M[0],W=M[1],J=Object(b.h)().gameId,R=g(),z=R.currentUser.functions,Y=z.enableSubmissions,q=z.disableSubmissions,K=z.getRandomArtCard,N=z.setArtUrlForGame,Q=z.selectWinningCaption;Object(r.useEffect)((function(){function e(){return e=Object(l.a)(o.a.mark((function e(){var t,n,r,c,s,i,l,u,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Subscribing to change stream for game ".concat(J)),a(!0),t=R.currentUser.mongoClient("mongodb-atlas"),n=t.db("classic-cards").collection("games"),e.next=6,n.findOne({game_id:J});case 6:r=e.sent,j(r),x||p(r.image_url),c=n.watch({"fullDocument._id":J}),s=!1,i=!1,e.prev=12,u=Object(w.a)(c);case 14:return e.next=16,u.next();case 16:if(!(s=!(b=e.sent).done)){e.next=23;break}d=b.value,console.log("Game object updated",d),j(d.fullDocument);case 20:s=!1,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),i=!0,l=e.t0;case 29:if(e.prev=29,e.prev=30,!s||null==u.return){e.next=34;break}return e.next=34,u.return();case 34:if(e.prev=34,!i){e.next=37;break}throw l;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[12,25,29,39],[30,,34,38]])}))),e.apply(this,arguments)}n||function(){e.apply(this,arguments)}()}),[R]);var V=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.allow_submissions){e.next=6;break}return console.log("Enabling submissions for game ".concat(J)),e.next=4,Y(J);case 4:e.next=9;break;case 6:return console.log("Disabling submissions for game ".concat(J)),e.next=9,q(J);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,K();case 3:t=e.sent,n=t.primaryImage,p(n),C(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,N(J,x);case 3:L(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(J,i.submissions[T]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"repeating-linear-gradient( to right, #fc9b90, #fc9b90 100px, #fffef6 100px, #fffef6 200px)"},children:[Object(m.jsx)(k.a,{variant:"h1",style:{fontFamily:"Fleur De Leah",color:"gold",textShadow:"2px 2px #000000"},children:"House of Memes"}),Object(m.jsx)(k.a,{variant:"h3",style:{fontFamily:"Fleur De Leah",color:"black",fontWeight:500},children:Object(m.jsx)("i",{children:" Cleverness creates champions"})}),Object(m.jsx)("br",{}),Object(m.jsxs)(B.a,{value:"check",selected:i.allow_submissions,onChange:function(){V()},children:[i.allow_submissions?"Disable":"Enable"," Submissions"]}),Object(m.jsx)("br",{}),Boolean(!i.allow_submissions)&&Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:30},children:["Please select an art piece",Object(m.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500,boxShadow:"2px 2px 6px #000",marginBottom:50},src:x}),Object(m.jsx)(d.a,{onClick:X,disabled:y,variant:"outlined",children:"Get random art piece"}),Object(m.jsx)(d.a,{onClick:Z,disabled:G,variant:"contained",children:"Make current art piece active"})]}),Boolean(i.allow_submissions)&&Object(m.jsx)("div",{children:Object(m.jsx)("img",{style:{border:10,borderColor:"#CCA604",borderStyle:"ridge",height:500},src:i.image_url})}),Object(m.jsxs)("div",{style:{marginTop:50},children:[Object(m.jsx)(H.a,{sx:{width:"100%",overflow:"hidden"},children:Object(m.jsx)(F.a,{sx:{maxHeight:300},children:Object(m.jsxs)(D.a,{stickyHeader:!0,sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(m.jsx)(A.a,{children:Object(m.jsx)(E.a,{children:Object(m.jsxs)(U.a,{children:["Submissions (",i.submissions.length,")"]})})}),Object(m.jsx)(I.a,{children:i.submissions.map((function(e,t){return Object(m.jsx)(E.a,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:function(){return W(t)},selected:t===T,children:Object(m.jsx)(U.a,{component:"th",scope:"row",children:e})},"row-".concat(t))}))})]})})}),Object(m.jsx)(d.a,{disabled:-1===T,onClick:$,children:"Select winner"})]}),Object(m.jsxs)("div",{children:["You are the Host! Game: ",J]})]}):Object(m.jsx)("div",{children:"Loading game..."})},L=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(u.a)(n,2),c=a[0],s=a[1],i=g();return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,i.logIn(p.b.anonymous());case 4:console.log("Logged in!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}i.currentUser||c||function(){e.apply(this,arguments)}()}),[i,c]),i.currentUser?t:Object(m.jsx)("div",{children:"Loading..."})};var P=function(){return Object(m.jsx)(v,{appId:"house_of_memes-zajem",children:Object(m.jsx)(L,{children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"/",children:Object(m.jsx)(y,{})}),Object(m.jsx)(b.b,{exact:!0,path:"/game",children:Object(m.jsx)(b.a,{to:"/"})}),Object(m.jsx)(b.b,{exact:!0,path:"/game/:gameId",children:Object(m.jsx)(_,{})}),Object(m.jsx)(b.b,{exact:!0,path:"/game/:gameId/host",children:Object(m.jsx)(G,{})})]})})})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[321,1,2]]]);
//# sourceMappingURL=main.ba7a7d6b.chunk.js.map